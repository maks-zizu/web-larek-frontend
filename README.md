# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Создать файла .env с ключем `API_ORIGIN`, который указывает на адрес сервера API:

```
API_ORIGIN=https://example.com
```

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание интерфейса

- Просмотр списка товаров и счетчика товаров в корзине (MainPage)
- Просмотр харатеристик товара (ProductCard)
- Просмотр корзины (Basket)
- Оформление заказа (OrderAdress, OrderContacts, Success)

## Архитектура

Проект реализован с использованием архитектурного паттерна MVP (Model-View-Presenter), обеспечивающего четкое разделение ответственностей между слоями приложения:

- Model — управление данными приложения, взаимодействие с API и хранение состояния.
- View — отображение данных и взаимодействие с пользователем.
- Presenter — посредник между Model и View, обрабатывает бизнес-логику и события.

### Основные части архитектуры

- Базовые классы (Base): Предоставляют общие функциональности для других компонентов.
- Модели данных (Model): Управляют данными и бизнес-логикой приложения.
- Отображения (View): Отвечают за пользовательский интерфейс и взаимодействие с пользователем.
- Контроллеры (Presenter): Связывают модели и отображения, обрабатывают события и управляют потоком данных.

### Взаимодействие компонентов

1. Пользователь взаимодействует с интерфейсом через View.
2. View отправляет события в Presenter.
3. Presenter обрабатывает события и взаимодействует с Model.
4. Model обновляет данные и уведомляет об изменениях через EventEmitter.
5. Presenter получает обновления от Model и обновляет View.

## Базовые блоки (Base)

### Базовый класс `API`

Базовый класс для взаимодействия с серверным API. Содержит методы для выполнения HTTP-запросов и обработки ответов.

### Базовый класс `EventEmitter`

Обеспечивает работу событий внутри приложения. Предоставляет методы установить и снять слушатели событий и эмиссии событий.

### Абстрактный класс `Model`

Абстрактный класс для моделей данных. Содержит методы для эмиссии событий при изменении состояния.

## Модели данных (Model)

### Класс `AppStateModel`

Главная модель приложения, управляющая состоянием товаров, корзины и заказа. Взаимодействует с `LarekApi` для получения данных и оформления заказа.

Функции:

- Хранение списка товаров, информации о конкретном товаре, корзины и заказа.
- Методы для управления корзиной и оформлением заказа.
- Взаимодействие с LarekApi для получения данных.

## Специальные компоненты

Данный набор компонентов необходим для работы с API и другими службами.

### Класс `LarekApi`

Класс для взаимодействия с API магазина. Реализует методы для получения списка товаров, информации о товаре и создания заказа.

Функции:

- Получение списка товаров (getProductList).
- Получение информации о товаре (getProductItem).
- Создание заказа (createOrder).

## Отображения (View)

### Глобальные компоненты

Данный набор компонентов необходим для работы со страницей.

### Класс `MainPage`

Отображение главной страницы приложения. Отображает список товаров и количество товаров в корзине.

### Класс `ProductCard`

Отображение и управление карточками товара(в каталоге, на превью и в корзине), а так же обработку событий пользователя.

### Класс `OrderContacts`

Представляет форму оформления заказа с контактной информацией покупателя.

### Класс `OrderAdress`

Представляет форму оформления заказа с информацией об способе оплаты и адресом доставки.

### Класс `Success`

Отображает информацию об успешно оформленном заказе.

### Класс `Modal`

Предназначение: Управляет отображением модальных окон.

Функции:

- Открытие и закрытие модальных окон.
- Управление содержимым модального окна.
- Обработка событий внутри модального окна.

## Пример использования классов и компонентов

- Пользователь открывает приложение и видит список товаров, отображаемый с помощью класса MainPage.
- При нажатии на товар срабатывает метод setProductInfo модели AppStateModel, обновляя информацию о текущем товаре.
- Класс ProductCard отображает подробную информацию о товаре.
- Пользователь добавляет товар в корзину, вызывая метод addToBasket.
- При оформлении заказа используются классы OrderContacts и OrderAddress для сбора данных.
- После подтверждения заказа вызывается метод submitOrder, который взаимодействует с LarekApi для создания заказа на сервере.
- Класс Success отображает информацию об успешно созданном заказе.
